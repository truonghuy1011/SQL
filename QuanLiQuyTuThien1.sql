CREATE DATABASE QuanLiQuyTuThien
GO
USE QuanLiQuyTuThien
GO
CREATE TABLE NHANVIEN (
   MANV CHAR(10) NOT NULL PRIMARY KEY,--KHOA CHINH
   TENNV NVARCHAR(100),
   CMNDNV CHAR(10),
   SDTNV CHAR(10),
   DCNV NVARCHAR(200),
   LUONG MONEY,
   MAPB CHAR(10)NOT NULL,
   MACV CHAR(10)NOT NULL,

CONSTRAINT FK_NHANVIEN_PHONGBAN FOREIGN KEY (MAPB) REFERENCES PHONGBAN(MAPB),
CONSTRAINT FK_NHANVIEN_CONGVIEC FOREIGN KEY (MACV) REFERENCES CONGVIEC(MACV),
);


CREATE TABLE PHONGBAN(
   MAPB CHAR(10)NOT NULL PRIMARY KEY,
   TENPB NVARCHAR(50),
);


CREATE TABLE CONGVIEC(
   MACV CHAR(10)NOT NULL PRIMARY KEY,
   TENCV NVARCHAR(100),
   NHIEMVU NVARCHAR(200),
);


CREATE TABLE THUQUY(
   MATQ CHAR(10)NOT NULL PRIMARY KEY,
   TENTQ NVARCHAR(50),
   CMNDTQ CHAR(10),
   SDTTQ CHAR(10),
   DCTQ NVARCHAR(200),
   NGAYTHU DATETIME,
   NGAYCHI DATETIME,
);


CREATE TABLE NHAHAOTAM(
   MANHT CHAR(10)NOT NULL PRIMARY KEY,
   TENNHT NVARCHAR(100),
   SDTNHT CHAR(10),
   DCNHT NVARCHAR(200),
   DONGGOP NVARCHAR(50),
   NGAYDONGGOP DATETIME,
);


CREATE TABLE DOITUONGTHUHUONG(
   MADOITUONG CHAR(10)NOT NULL PRIMARY KEY,
   TENDOITUONG NVARCHAR(100),
   CMND CHAR(10),
   SDTDOITUONG CHAR(10),
   DIACHI NVARCHAR(200),
   HOTRO NVARCHAR(50),
   NGAYHOTRO DATETIME,
);


CREATE TABLE QUYPHUONGTIEN(
   MAQUY CHAR(10)NOT NULL PRIMARY KEY,
   TENQUY NVARCHAR(100),
   TIENDG MONEY,
   TIENHT MONEY,
   HIENVAT NVARCHAR,
   MANHT CHAR(10)NOT NULL ,
   MADOITUONG CHAR(10)NOT NULL ,
   MATQ CHAR(10)NOT NULL ,
   MANV CHAR(10)NOT NULL ,
);
CONSTRAINT FK_QUYPHUONGTIEN_NHAHAOTAM FOREIGN KEY (MANHT) REFERENCES NHAHAOTAM(MANHT),
CONSTRAINT FK_QUYPHUONGTIEN_DOITUONGTHUHUONG FOREIGN KEY (MADOITUONG) REFERENCES DOITUONGTHUHUONG(MADOITUONG),
CONSTRAINT FK_QUYPHUONGTIEN_THUQUY FOREIGN KEY (MATQ) REFERENCES THUQUY(MATQ),
CONSTRAINT FK_QUYPHUONGTIEN_NHANVIEN FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),


--KHOA NGOAI
/*ALTER TABLE dbo.NHANVIEN         ADD FOREIGN KEY (MAPB)        REFERENCES dbo.PHONGBAN(MAPB)
ALTER TABLE dbo.NHANVIEN	     ADD FOREIGN KEY (MACV)        REFERENCES dbo.CONGVIEC(MACV)
ALTER TABLE dbo.QUYPHUONGTIEN    ADD FOREIGN KEY (MANHT)        REFERENCES dbo.NHAHAOTAM(MANHT)
ALTER TABLE dbo.QUYPHUONGTIEN    ADD FOREIGN KEY (MADOITUONG)  REFERENCES dbo.DOITUONGTHUHUONG(MADOITUONG)	
ALTER TABLE dbo.QUYPHUONGTIEN    ADD FOREIGN KEY (MATQ)        REFERENCES dbo.THUQUY(MATQ)
ALTER TABLE dbo.QUYPHUONGTIEN    ADD FOREIGN KEY (MANV)        REFERENCES dbo.NHANVIEN(MANV)*/
/*CONSTRAINT FK_NHANVIEN_PHONGBAN FOREIGN KEY (MAPB) REFERENCES PHONGBAN(MAPB),
CONSTRAINT FK_NHANVIEN_CONGVIEC FOREIGN KEY (MACV) REFERENCES CONGVIEC(MACV),
CONSTRAINT FK_QUYPHUONGTIEN_NHAHAOTAM FOREIGN KEY (MANHT) REFERENCES NHAHAOTAM(MANHT),
CONSTRAINT FK_QUYPHUONGTIEN_DOITUONGTHUHUONG FOREIGN KEY (MADOITUONG) REFERENCES DOITUONGTHUHUONG(MADOITUONG),
CONSTRAINT FK_QUYPHUONGTIEN_THUQUY FOREIGN KEY (MATQ) REFERENCES THUQUY(MAPB),
CONSTRAINT FK_QUYPHUONGTIEN_NHANVIEN FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),*/

--NHA DU LIEU
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV001',N'Nguyễn Thị Thu Cẩm','025800001','0987654321',N'1 Nguyễn Khuyến,Đống Đa,TP Hà Nội','100000','PB001','CV001')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV002',N'Nguyễn Thị Thu Hồng','025800012','0912345678',N'2 Trần Phú,Lộc Thọ,TP Nha Trang','200000','PB001','CV002')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV003',N'Nguyễn Văn Hiệp','025800023','0987654123',N'3 Lý Thường Kiệt,Tân Xuyên,TP Cà Mau','10000000','PB002','CV003')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV004',N'Đào Đức Đạt','025800034','0987456321',N'4 Võ Văn Ngân,Thủ Đức,TPHCM','10000000','PB003','CV004')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV005',N'Nguyễn Hoàng Dương','025800045','0987652341',N'5 Thống Nhất,Dĩ An,Bình Dương','30000000','PB004','CV005')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV006',N'Lê Quang Vũ','025800056','0956784321',N'6 Tân Chánh Hiệp,Quận 12,TPHCM','50000000','PB002','CV006')
INSERT INTO NHANVIEN(MANV,TENNV,CMNDNV,SDTNV,DCNV,LUONG,MAPB,MACV)
VALUES ('NV007',N'Lê Cao Quyền','025800067','0987612345',N'7 Trần Hưng Đạo,Bắc Lệnh,Lào Cai','2000000','PB005','CV007')

INSERT INTO PHONGBAN(MAPB,TENPB)
VALUES('PB001',N'Kế Toán')
INSERT INTO PHONGBAN(MAPB,TENPB)
VALUES('PB002',N'Ban Điều Hành')
INSERT INTO PHONGBAN(MAPB,TENPB)
VALUES('PB003',N'Ban Quản Lí')
INSERT INTO PHONGBAN(MAPB,TENPB)
VALUES('PB004',N'Khảo Sát & Giám Định')
INSERT INTO PHONGBAN(MAPB,TENPB)
VALUES('PB005',N'Ban Tình Nguyện')

INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV001',N'Kế Toán Trưởng',N'đi tìm thêm kinh phí để duy trì quỹ')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV002',N'Kế Toán Tổng Hợp',N'rà soát lại thu chi của quỹ')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV003',N'Chủ Tịch Hội Đồng Điều Hành',N'điều hành các tổ chức thiện nguyện')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV004',N'Quản Lí Nhân Viên',N'xem xét lại các hoạt động của nhân viên')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV005',N'Khảo Sát Đối Tượng Thụ Hưởng',N'đi khảo sát thực tế và duyệt lên thủ quỷ')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV006',N'Trưởng Ban',N'quản lí các tổ chức thiện nguyện')
INSERT INTO CONGVIEC(MACV,TENCV,NHIEMVU)
VALUES('CV007',N'Trưởng Ban Tình Nguyện',N'đi phát động và cùng các tình nguyện viên thăm hỏi,hỗ trợ đối tượng thụ hưởng')

INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY001',N'Quỹ giúp đỡ người nghèo','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY002',N'Quỹ cơm từ thiện','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY003',N'Quỹ trẻ mồ côi','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY004',N'Quỹ lương','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY005',N'Quỹ dự phòng','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY006',N'Quỹ giúp đỡ người nghèo','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY007',N'Quỹ giúp đỡ trẻ hiếu học','300000000','20000000',N'Nhà','','','','')
INSERT INTO QUYPHUONGTIEN(MAQUY,TENQUY,TIENDG,TIENHT,HIENVAT,MANHT,MADOITUONG,MATQ,MANV)
VALUES('QUY008',N'Quỹ cơm từ thiện','300000000','20000000',N'Nhà','','','','')

INSERT INTO DOITUONGTHUHUONG(MADOITUONG,TENDOITUONG,CMND,SDTDOITUONG,DIACHI,HOTRO,NGAYHOTRO)
VALUES('DT001',N'Đinh Hoàng Vũ','035800011','0687654321',N'1 Lê Thái Tổ,Hoàn Kiếm,TP Hà Nội',N'Nhà','20191009')
INSERT INTO DOITUONGTHUHUONG(MADOITUONG,TENDOITUONG,CMND,SDTDOITUONG,DIACHI,HOTRO,NGAYHOTRO)
VALUES('DT002',N'Nguyễn Đình Hoàng','035800022','0555544444',N'2 Nguyễn Văn Linh,Quận 7,TPHCM',N'Bánh,kẹo','20191009')
INSERT INTO DOITUONGTHUHUONG(MADOITUONG,TENDOITUONG,CMND,SDTDOITUONG,DIACHI,HOTRO,NGAYHOTRO)
VALUES('DT003',N'Lê Nhật Hoàng','035800033','0999999999',N'3 Ngô Quyền,Sơn Trà,TP Đà Nẵng','20000000','20191009')
INSERT INTO DOITUONGTHUHUONG(MADOITUONG,TENDOITUONG,CMND,SDTDOITUONG,DIACHI,HOTRO,NGAYHOTRO)
VALUES('DT004',N'Nguyễn Hữu Thuận','035800044','0111111111',N'4 Bùi Viện,Quận 1,TPHCM','500000000','20191109')
INSERT INTO DOITUONGTHUHUONG(MADOITUONG,TENDOITUONG,CMND,SDTDOITUONG,DIACHI,HOTRO,NGAYHOTRO)
VALUES('DT005',N'Lê Văn Tú','035800055','0222222222',N'5 Thảo Điền,Quận 2,TPHCM','90000000','20191009')

INSERT INTO NHAHAOTAM(MANHT,TENNHT,SDTNHT,DCNHT,DONGGOP,NGAYDONGGOP)
VALUES('NHT001',N'Tập đoàn Alibaba','0987987987',N'1 Hàng Châu,Chiết Giang,Trung Quốc',N'Bánh,kẹo','20180808')
INSERT INTO NHAHAOTAM(MANHT,TENNHT,SDTNHT,DCNHT,DONGGOP,NGAYDONGGOP)
VALUES('NHT002',N'Doanh nhân Nguyễn Viết Vũ','0456456456',N'2 Đinh Tiên Hoàng,TP Buôn Ma Thuột','5000000000','20190208')
INSERT INTO NHAHAOTAM(MANHT,TENNHT,SDTNHT,DCNHT,DONGGOP,NGAYDONGGOP)
VALUES('NHT003',N'Thiếu gia Dương Hùng Kiệt','0123123123',N'3 Trần Phú,TP Bạc Liêu',N'Nhà','20190101')
INSERT INTO NHAHAOTAM(MANHT,TENNHT,SDTNHT,DCNHT,DONGGOP,NGAYDONGGOP)
VALUES('NHT004',N'Đại gia Phạm Duy Tấn','0987123400',N'4 Y Ngông,TP Buôn Ma Thuột ',N'Nhà','20180202')
INSERT INTO NHAHAOTAM(MANHT,TENNHT,SDTNHT,DCNHT,DONGGOP,NGAYDONGGOP)
VALUES('NHT005',N'Tỷ phú Mai Xuân Thưởng','0121212121',N'5 Lê Huân,TP Huế','100000000000','20180404')

INSERT INTO THUQUY(MATQ,TENTQ,CMNDTQ,SDTTQ,DCTQ,NGAYTHU,NGAYCHI)
VALUES('TQ001',N'Trần Ngọc Tuân','045801234','09363636',N'1 Yersin,TP Đà Lạt','20190505','20191009')
INSERT INTO THUQUY(MATQ,TENTQ,CMNDTQ,SDTTQ,DCTQ,NGAYTHU,NGAYCHI)
VALUES('TQ002',N'Nguyễn Thị Thu Thảo','045832112','0967676767',N'2 Yersin,TP Đà Lạt','20190505','20191009')
INSERT INTO THUQUY(MATQ,TENTQ,CMNDTQ,SDTTQ,DCTQ,NGAYTHU,NGAYCHI)
VALUES('TQ003',N'Nguyễn Thị Thu Trang','045845665',N'3 Yersin,TP Đà Lạt','20190606','20191109')
INSERT INTO THUQUY(MATQ,TENTQ,CMNDTQ,SDTTQ,DCTQ,NGAYTHU,NGAYCHI)
VALUES('TQ004',N'Văn Thị Ngân Hà','045878998',N'4 Yersin,TP Đà Lạt','20190606','20191109')